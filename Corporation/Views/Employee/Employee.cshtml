@model  EmployeeViewModel

@{
    ViewData["Title"] = "Employee";
}
@foreach (var item in Model.Departments)
{
    <h2>@item.Name</h2>
    <a asp-action="CreateEmployee" asp-route-id="@item.Id">Create employee</a>
    <table class="table">
        <thead>
        <tr>
            <th>
                Employee id
            </th>
            <th>
                Department dd
            </th>
            <th>
                Surname
            </th>
            <th>
                First name
            </th>
            <th>
                Patronymic
            </th>
            <th>
                Age
            </th>
            <th>
                Document series
            </th>
            <th>
                Document number
            </th>
            <th>
                Position
            </th>
            <th>
            </th>
        </tr>
        </thead>
        <tbody>
        @if (Model.GroupedEmployees.FirstOrDefault(group => group?.Key == item.Id) != null)
        {
            foreach (var employee in Model.GroupedEmployees.FirstOrDefault(group => group?.Key == item.Id))
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => employee.Id)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.DepartmentId)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.Surname)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.FirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.Patronymic)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.Age)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.DocSeries)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.DocNumber)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => employee.Position)
                    </td>
                    <td>
                        <a asp-action="GetEmployee" asp-route-id="@employee.Id">Details</a>
                    </td>
                </tr>
            }
        }
        </tbody>
    </table>
}